<html>
<head>  
<meta charset='UTF-8'>
<title>Statistics</title>
<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css'>
<link href="css/monitoring.css" rel="stylesheet">
</head>  
<body role="document" ng-app='myApp'> 


  <!-- Fixed navbar -->
   <nav class="navbar navbar-inverse navbar-fixed-top">
       <div class="container">
              <div class="navbar-header">
                  <ul class="nav navbar-nav">
                      <li><img src="https://raw.githubusercontent.com/Fermat-ORG/media-kit/master/MediaKit/Fermat%20Branding/Fermat%20Logotype/Fermat_Logo_3D.png" class="img-responsive" alt="Fermat.org" width="95px" height="95px" /></li>
                      <li><a class="navbar-brand" href="#">Cloud Server</a></li>
                  </ul>
              </div>
              <div id="navbar" class="navbar-collapse collapse">
                  <ul class="nav navbar-nav">
                      <li class="active"><a href="http://localhost:9090/fermat">Home</a></li>
                  </ul>
              </div><!--/.nav-collapse -->
       </div>
    </nav>


	<div class='container theme-showcase' role="main"> 
	
		<br>
		 <h2 class="page-header">Statistics of the Usage of Actual Month</h2>
		
		   <br/>   <br/>
		 <div class='row'>
		   <div class='col-lg-12' ng-controller='controllerStatistic'>
			<div id='myfirstchart' style='height: 250px;'></div>
		   </div>
		
		 </div>
	
	</div>

  	  <br/>
      <br/>
      <br/>
      <br/>
      <br/>
      <br/>

      <footer>
          <p>Â© 2016 Develop at <a href="http://fermat.org/">Fermat.org</a>.</p>
      </footer>


<link rel='stylesheet' href='http://cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css'>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script>
<script src='http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js'></script>
<script src='http://cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js'></script>
<script src='http://ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js'></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script>
    var app = angular.module('myApp', []);
      
    app.controller("controllerStatistic", function($scope, $http)
 	{
 
 
	    $http.get('http://localhost:9696/statistics/admin/usageaverage/current/data')
		 .success(function(response) {

		 	if(response.success){
		 	 
			 	 var auxdata = [];
			 	 auxdata = JSON.parse(response.data);
			 	 //console.log(auxdata); 

			 	 var index;
			 	 var vectorstatistics = [];
			 	 for(index = 0; index < auxdata.length; index++){
			 	 	var dia = auxdata[index].year.toString() +'-'+ auxdata[index].month.toString() +'-'+ auxdata[index].day.toString();
			 	  vectorstatistics.push({day:dia, memory:auxdata[index].memory, cpu:auxdata[index].cpu});
			 	 }

			 	 //console.log(vectorstatistics); 
			     		      
				 new Morris.Area({
				   element: 'myfirstchart',
				   data: vectorstatistics,
				   xkey: 'day',
				   ykeys: ['memory','cpu'],
				   labels: ['Memory','Cpu'],
				});

			}

		})
		.error(function(data) {
		    console.log('Error: ' + data);
	   });


	});

</script>
</body>  
</html>  

